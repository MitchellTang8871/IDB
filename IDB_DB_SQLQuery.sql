CREATE DATABASE APA_library;

USE APA_library;
GO

DROP DATABASE APA_library;


CREATE TABLE DEPARTMENTS
	(DepartmentID INTEGER PRIMARY KEY,  
	  DepartmentName  VARCHAR(50) NOT NULL);   

CREATE TABLE MEMBER_DETAILS
	(MemberID   VARCHAR(50)   PRIMARY KEY,  
	  MemberName  VARCHAR(50) NOT NULL,     
	  EmailAddress VARCHAR(50)  NOT NULL,
	  DepartmentID INTEGER NOT NULL REFERENCES DEPARTMENTS(DepartmentID),
	  Roles   VARCHAR(50)  NOT NULL);

CREATE TABLE STAFF_DETAILS
	(StaffID   VARCHAR(50)   PRIMARY KEY,  
	  StaffName  VARCHAR(50) NOT NULL,     
	  Contact INTEGER  NOT NULL);

CREATE TABLE CATEGORIES
	(CategoriesID INTEGER PRIMARY KEY,  
	  Categories  VARCHAR(50) NOT NULL,     
	  FinePerDay INTEGER  NOT NULL);

CREATE TABLE CATALOGUE
	(BookID   VARCHAR(50)   PRIMARY KEY,  
	  CategoriesID  INTEGER  NOT NULL REFERENCES CATEGORIES(CategoriesID),
	  ISBN VARCHAR(50)  NOT NULL,
	  BookTitle VARCHAR(50)  NOT NULL,
	  BookAuthor VARCHAR(50)  NOT NULL,
	  Publisher VARCHAR(50) NOT NULL,
	  PublishYear INTEGER NOT NULL,
	  SubjectArea VARCHAR(50) NOT NULL,
	  BookDescription  VARCHAR(50)  NOT NULL);

CREATE TABLE RESERVATION
	(ReservationID   INTEGER   PRIMARY KEY,  
	  MemberID  VARCHAR(50) NOT NULL REFERENCES MEMBER_DETAILS(MemberID), 
	  BookID VARCHAR(50) NOT NULL REFERENCES CATALOGUE(BookID),
	  ReservationStatus VARCHAR(50)  NOT NULL);

CREATE TABLE LENDING_RECORDS
	(LendingID   VARCHAR(50)   PRIMARY KEY,  
	  MemberID  VARCHAR(50) NOT NULL REFERENCES MEMBER_DETAILS(MemberID),
	  BookID  VARCHAR(50) NOT NULL REFERENCES CATALOGUE(BookID),
	  BorrowDate  DATE NOT NULL, 
	  DueDate  DATE NOT NULL, 
	  ActualReturnDate  DATE, 
	  StaffID VARCHAR(50) NOT NULL REFERENCES STAFF_DETAILS(StaffID),
	  Stat VARCHAR(50)  NOT NULL);



INSERT INTO DEPARTMENTS VALUES (1,'Cybersecurity Department')
INSERT INTO DEPARTMENTS VALUES (2,'Engineering Department')
INSERT INTO DEPARTMENTS VALUES (3,'Business Department')
INSERT INTO DEPARTMENTS VALUES (4,'IT Department')
INSERT INTO DEPARTMENTS VALUES (5,'Art Department')
INSERT INTO DEPARTMENTS VALUES (6,'Socialmedia Department')

--RAW DATA FOR MEMBER
INSERT INTO MEMBER_DETAILS VALUES ('UPA2314','Joel','joel@mail.upa.my',1,'Lecture')
INSERT INTO MEMBER_DETAILS VALUES ('UPA2315','Mitchell','Mitchell@mail.upa.my',1,'Student')
INSERT INTO MEMBER_DETAILS VALUES ('UPA2316','ChunKit','ChunKit@mail.upa.my',1,'Student')
INSERT INTO MEMBER_DETAILS VALUES ('UPA2317','Sheldon','Sheldon@mail.upa.my',1,'Student')
INSERT INTO MEMBER_DETAILS VALUES ('UPA2318','ChenLam','ChenLam@mail.upa.my',1,'Lecture')
INSERT INTO MEMBER_DETAILS VALUES ('UPA2319','MingWei','MingWei@mail.upa.my',2,'Lecture')
INSERT INTO MEMBER_DETAILS VALUES ('UPA2320','JiunJie','JiunJie@mail.upa.my',3,'Student')
INSERT INTO MEMBER_DETAILS VALUES ('UPA2321','Guraj','Guraj@mail.upa.my',4,'Student')
INSERT INTO MEMBER_DETAILS VALUES ('UPA2322','Tycus','Tycus@mail.upa.my',5,'Student')
INSERT INTO MEMBER_DETAILS VALUES ('UPA2323','KitKit','Kitkit@mail.upa.my',6,'Lecture')

--RAW DATA FOR STAFF
INSERT INTO STAFF_DETAILS VALUES ('SID00001','Jonathan',0126342135)
INSERT INTO STAFF_DETAILS VALUES ('SID00002','Jerry',0126342134)
INSERT INTO STAFF_DETAILS VALUES ('SID00003','James',0126342136)
INSERT INTO STAFF_DETAILS VALUES ('SID00004','Beans',0126342137)
INSERT INTO STAFF_DETAILS VALUES ('SID00005','Tom',0198124776)
INSERT INTO STAFF_DETAILS VALUES ('SID00006','Rock',0162361361)


--RAW DATA FOR CATEGORIES
INSERT INTO CATEGORIES VALUES (1,'Open-stack',20)
INSERT INTO CATEGORIES VALUES (2,'Gren-tagged',30)
INSERT INTO CATEGORIES VALUES (3,'Yellow-tagged',50)
INSERT INTO CATEGORIES VALUES (4,'Red-tagged',100)

--RAW DATA FOR CATALOUGE
INSERT INTO CATALOGUE VALUES ('LB082500',1,'432-54-76575-65-8','Harry Potter and The Philosopher','J.K Rowling','Bloomsbury (UK)',1997,'Fantasy','Magic Boi1')
INSERT INTO CATALOGUE VALUES ('LB082522',1,'978-14-05874-37-3','Business Database Systems','Thomas Connolly', 'Addison-Wesley', 2008,'Computing','Database')  
INSERT INTO CATALOGUE VALUES ('LB083503',1,'978-02-01094-28-2','A guide to DB2','C.J.Date','Addison Wesley', 1989, 'Computing','Database part 2')  
INSERT INTO CATALOGUE VALUES ('LB081067',1,'978-04-71711-24-7','Operating System','Ramez Elmasri','McGraw-Hill Education', 2009,'Computing','About operating system') 
INSERT INTO CATALOGUE VALUES ('LB082330',1,'978-04-39064-87-3','Harry Potter :Chamber of secret','J.K Rowling','Bloomsbury (UK)',1998,'Fantasy','Magic Boi2')
INSERT INTO CATALOGUE VALUES ('LB090909',2,'456-54-21211-68-5','Moneyball: The Art of Winning an Unfair Game','Michael Lewis','W. W. Norton & Company',2004,'Non-fiction','Cheating master')
INSERT INTO CATALOGUE VALUES ('LB013654',1,'243-54-73452-35-8','The Silent Patient','Alex Michaelides','Celadon Books',2019,'Mystery','The injured person in hospital who is quiet')
INSERT INTO CATALOGUE VALUES ('LB051263',1,'323-45-65654-44-2','Foundation','Isaac Asimov','Gnome Press',1942,'Science Fiction','Course before Degree')
INSERT INTO CATALOGUE VALUES ('LB052645',3,'978-18-47941-83-1','Atomic Habits','James Clear','Penguin Publishing Group',2018,'Inspiration','Change your bad habits')
INSERT INTO CATALOGUE VALUES ('LB090905',2,'767-43-43244-56-4','Into Thin Air','Jon Krakauer','Villard Books',1997,'Narrative','Disappear into air')
INSERT INTO CATALOGUE VALUES ('LB016345',1,'978-18-49549-25-8','The One Thing','Gray Keller','John Murray Press',2016,'Inspiration','Make your life happier')
INSERT INTO CATALOGUE VALUES ('LB213233',1,'323-33-43422-54-3','C# Programming','James Wonder','Prentice Hall',2019,'Computing','Enhance your programming skill')
INSERT INTO CATALOGUE VALUES ('LB321311',1,'321-43-43444-44-4','Python Programming','Kyler Stone','Prentice Hall',2019,'Computing','Enhance your programming skill')

--RAW DATA FOR LENDING RECORDS
INSERT INTO LENDING_RECORDS VALUES ('L000001','UPA2314','LB082500','2021-11-25','2021-12-25','2021-12-10','SID00001','Returned')
INSERT INTO LENDING_RECORDS VALUES ('L000002','UPA2316','LB082500','2021-12-11','2022-1-11','2022-1-6','SID00002','Returned')
INSERT INTO LENDING_RECORDS VALUES ('L000003','UPA2316','LB082522','2021-12-11','2022-1-11','2022-1-13','SID00002','Returned')
INSERT INTO LENDING_RECORDS VALUES ('L000004','UPA2316','LB083503','2021-12-11','2022-1-11','2022-1-13','SID00006','Returned')
INSERT INTO LENDING_RECORDS VALUES ('L000005','UPA2317','LB081067','2021-12-20','2022-1-20',NULL,'SID00003','Unreturned')
INSERT INTO LENDING_RECORDS VALUES ('L000006','UPA2318','LB016345','2021-12-25','2022-2-25','2022-1-29','SID00006','Returned')
INSERT INTO LENDING_RECORDS VALUES ('L000007','UPA2319','LB090905','2022-1-3','2022-2-3','2022-2-5','SID00006','Returned')
INSERT INTO LENDING_RECORDS VALUES ('L000008','UPA2319','LB016345','2022-1-30','2022-2-28',NULL,'SID00001','Unreturned')
INSERT INTO LENDING_RECORDS VALUES ('L000009','UPA2316','LB090905','2022-2-5','2022-3-5',NULL,'SID00004','Unreturned')
INSERT INTO LENDING_RECORDS VALUES ('L000010','UPA2321','LB052645','2022-2-20','2022-2-27','2022-3-1','SID00005','Returned')
INSERT INTO LENDING_RECORDS VALUES ('L000011','UPA2316','LB051263','2022-2-25','2022-3-25',NULL,'SID00006','Unreturned')
INSERT INTO LENDING_RECORDS VALUES ('L000012','UPA2323','LB090909','2022-2-28','2022-3-28',NULL,'SID00001','Unreturned')


--RAW DATA FOR RESERVATION
INSERT INTO RESERVATION VALUES (1,'UPA2323','LB090909','Reserving')
INSERT INTO RESERVATION VALUES (2,'UPA2318','LB016345','Done')
INSERT INTO RESERVATION VALUES (3,'UPA2316','LB051263','Reserving')
INSERT INTO RESERVATION VALUES (4,'UPA2321','LB052645','Done')
INSERT INTO RESERVATION VALUES (5,'UPA2316','LB090905','Reserving')